<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Existing meta tags, styles, and links remain unchanged -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#4361ee">
    <meta name="description" content="Interactive learning app for non-verbal children">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/icon-167x167.png">
    <meta charset="UTF-8">
    <title>Silent Learners - Communication & Education App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Existing styles remain unchanged */
        :root {
            --primary: #4361ee;
            --primary-light: #4cc9f0;
            --primary-dark: #3a0ca3;
            --secondary: #f72585;
            --success: #4cc9f0;
            --warning: #f8961e;
            --danger: #ef233c;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --lighter: #ffffff;
            --text: #2b2d42;
            --text-light: #8d99ae;
            --border: #e9ecef;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Neue', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, 
                        Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background-color: var(--lighter);
            -webkit-font-smoothing: antialiased;
        }

        h1, h2, h3, h4 {
            font-weight: 700;
            line-height: 1.2;
            color: var(--dark);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        header {
            background-color: var(--lighter);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 50;
            padding: 1rem 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            color: var(--secondary);
        }

        .app-container {
            display: flex;
            min-height: calc(100vh - 120px);
        }

        .sidebar {
            width: 250px;
            background-color: var(--lighter);
            padding: 1.5rem 1rem;
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
        }

        .nav-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 2rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: var(--radius-sm);
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            transition: var(--transition);
        }

        .nav-link:hover, .nav-link.active {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .nav-link i {
            font-size: 1.25rem;
            width: 24px;
            text-align: center;
        }

        .main-content {
            flex: 1;
            padding: 2rem;
            background-color: var(--light);
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .module-card {
            background-color: var(--lighter);
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
            border: 1px solid var(--border);
            position: relative;
        }

        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .module-image-container {
            height: 160px;
            overflow: hidden;
            position: relative;
        }

        .module-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .module-card:hover .module-image {
            transform: scale(1.05);
        }

        .module-details {
            padding: 1.25rem;
        }

        .module-title {
            font-size: 1.125rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .module-description {
            font-size: 0.875rem;
            color: var(--text-light);
            margin-bottom: 1rem;
        }

        .module-actions {
            display: flex;
            gap: 0.5rem;
        }

        .communication-board {
            background-color: white;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            margin-top: 2rem;
        }

        .board-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .board-item {
            background-color: var(--light);
            border-radius: var(--radius-sm);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--border);
            text-align: center;
            min-height: 120px;
        }

        .board-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
            transform: translateY(-2px);
        }

        .board-item i {
            font-size: 2rem;
            color: var(--primary);
        }

        .board-item img {
            width: 48px;
            height: 48px;
            object-fit: contain;
        }

        .board-item-text {
            font-size: 0.875rem;
            font-weight: 500;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-sm);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            text-decoration: none;
            gap: 0.5rem;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-outline:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .progress-container {
            background-color: white;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            margin-top: 2rem;
        }

        .progress-bar {
            height: 12px;
            background-color: var(--light);
            border-radius: 6px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--success);
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        .progress-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .progress-item {
            background-color: var(--light);
            border-radius: var(--radius-sm);
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .progress-item i {
            font-size: 1.25rem;
            color: var(--success);
        }

        .progress-item.completed i {
            color: var(--success);
        }

        .progress-item.in-progress i {
            color: var(--warning);
        }

        footer {
            background-color: var(--dark);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
        }

        .footer-column h3 {
            font-size: 1.125rem;
            margin-bottom: 1rem;
            color: white;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.5rem;
        }

        .footer-links a {
            color: #9ca3af;
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-links a:hover {
            color: white;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid #374151;
            color: #9ca3af;
            font-size: 0.875rem;
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                padding: 1rem;
                border-right: none;
                border-bottom: 1px solid var(--border);
            }

            .nav-links {
                flex-direction: row;
                overflow-x: auto;
                padding-bottom: 0.5rem;
                margin-top: 1rem;
            }

            .nav-link {
                white-space: nowrap;
            }

            .main-content {
                padding: 1.5rem;
            }

            .modules-grid {
                grid-template-columns: 1fr;
            }

            .board-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .bounce {
            animation: bounce 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 1.5s infinite;
        }

        .speech-output {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--primary);
            color: white;
            padding: 1rem 2rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            font-size: 1.25rem;
            font-weight: 600;
            z-index: 100;
            display: none;
        }

        .speech-output.show {
            display: block;
            animation: fadeInOut 3s forwards;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateX(-50%) translateY(20px); }
            20% { opacity: 1; transform: translateX(-50%) translateY(0); }
            80% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }

        body.dark-theme {
            --primary: #4cc9f0;
            --primary-light: #4895ef;
            --primary-dark: #4361ee;
            --secondary: #f72585;
            --dark: #0d1b2a;
            --light: #1b263b;
            --lighter: #0d1b2a;
            --text: #e0e1dd;
            --text-light: #778da9;
            --border: #415a77;
        }

        body.dark-theme .module-card,
        body.dark-theme .communication-board,
        body.dark-theme .progress-container {
            background-color: var(--light);
            border-color: var(--border);
        }

        .theme-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            z-index: 90;
            border: none;
        }

        .game-container {
            background-color: white;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            margin-top: 2rem;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .game-title {
            font-size: 1.5rem;
            color: var(--primary);
        }

        .game-score {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
        }

        .game-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .game-question {
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .game-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            width: 100%;
        }

        @media (min-width: 768px) {
            .game-options {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .game-option {
            background-color: var(--light);
            border-radius: var(--radius-sm);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid var(--border);
            text-align: center;
            min-height: 120px;
        }

        .game-option:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .game-option.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .game-option.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        .game-option img {
            width: 80px;
            height: 80px;
            object-fit: contain;
        }

        .game-feedback {
            font-size: 1.25rem;
            font-weight: 700;
            text-align: center;
            min-height: 2rem;
        }

        .game-feedback.correct {
            color: var(--success);
        }

        .game-feedback.incorrect {
            color: var(--danger);
        }

        .game-nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .game-progress {
            width: 100%;
            height: 10px;
            background-color: var(--light);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 1rem;
        }

        .game-progress-fill {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        .alphabet-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .alphabet-letter {
            font-size: 8rem;
            font-weight: 700;
            color: var(--primary);
            line-height: 1;
        }

        .alphabet-image {
            width: 200px;
            height: 200px;
            object-fit: contain;
            border-radius: var(--radius-sm);
            border: 2px solid var(--border);
        }

        .alphabet-word {
            font-size: 2rem;
            font-weight: 700;
        }

        .alphabet-nav {
            display: flex;
            justify-content: space-between;
            width: 100%;
            marginemary-top: 2rem;
        }

        .color-matching-game {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .color-card {
            height: 150px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            border: 3px solid transparent;
        }

        .color-card.selected {
            border-color: var(--primary);
            transform: scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .color-card.matched {
            opacity: 0.5;
            cursor: default;
        }

        .color-name {
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-sm);
            font-weight: 700;
        }

        /* New styles for music, rhythm, and storybook modules */
        .instrument-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
        }

        .instrument-item {
            background-color: var(--light);
            border-radius: var(--radius-sm);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--border);
            text-align: center;
            min-height: 120px;
        }

        .instrument-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
            transform: translateY(-2px);
        }

        .instrument-item i {
            font-size: 2rem;
            color: var(--primary);
        }

        .rhythm-sequence {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .rhythm-beat {
            width: 80px;
            height: 80px;
            border-radius: var(--radius-sm);
            background-color: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid var(--border);
        }

        .rhythm-beat.active {
            background-color: var(--primary);
            color: white;
        }

        .rhythm-beat.correct {
            background-color: var(--success);
        }

        .rhythm-beat.incorrect {
            background-color: var(--danger);
        }

        .storybook-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .storybook-page {
            background-color: var(--lighter);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            margin-bottom: 2rem;
        }

        .storybook-image {
            width: 100%;
            max-height: 300px;
            object-fit: contain;
            border-radius: var(--radius-sm);
            margin-bottom: 1rem;
        }

        .storybook-text {
            font-size: 1.25rem;
            line-height: 1.8;
            color: var(--text);
        }

        .storybook-nav {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
        }
    </style>
</head>
<body>
    <!-- Existing header remains unchanged -->
    <header>
        <div class="container header-content">
            <a href="index.html" class="logo">
                <i class="fas fa-hands-helping logo-icon"></i>
                <span>Esther's Silent Learners' hub</span>
            </a>
        </div>
    </header>

    <!-- Existing app container and sidebar remain unchanged -->
    <div class="app-container">
        <nav class="sidebar">
            <div class="user-profile">
                <h3>Welcome, Parent!</h3>
            </div>
            <div class="nav-links">
                <a href="#" class="nav-link active" data-section="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-link" data-section="communication">
                    <i class="fas fa-comment-dots"></i>
                    <span>Communication Board</span>
                </a>
                <a href="#" class="nav-link" data-section="learning">
                    <i class="fas fa-book-open"></i>
                    <span>Learning Modules</span>
                </a>
                <a href="#" class="nav-link" data-section="progress">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress Tracking</span>
                </a>
                <a href="#" class="nav-link" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </div>
        </nav>

        <main class="main-content">
            <!-- Existing dashboard section remains unchanged -->
            <section id="dashboard-section" class="section-content">
                <h1>Welcome to Silent Learners</h1>
                <p>An interactive learning and communication platform for non-verbal and children starting to talk.</p>
                <div class="quick-actions">
                    <h2>Quick Actions</h2>
                    <div class="modules-grid">
                        <div class="module-card" onclick="showSection('communication')">
                            <div class="module-image-container">
                                <img src="image1.webp" alt="Communication" class="module-image">
                            </div>
                            <div class="module-details">
                                <h3 class="module-title">Communication Board</h3>
                                <p class="module-description">Help your child express needs and feelings</p>
                                <div class="module-actions">
                                    <button class="btn btn-primary btn-sm">Open</button>
                                </div>
                            </div>
                        </div>
                        <div class="module-card" onclick="showSection('learning')">
                            <div class="module-image-container">
                                <img src="https://images.unsplash.com/photo-1541692641319-981cc79ee10a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80" alt="Learning" class="module-image">
                            </div>
                            <div class="module-details">
                                <h3 class="module-title">Learning Modules</h3>
                                <p class="module-description">Interactive educational activities</p>
                                <div class="module-actions">
                                    <button class="btn btn-primary btn-sm">Explore</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Existing communication section remains unchanged -->
            <section id="communication-section" class="section-content" style="display: none;">
                <h1>Communication Board</h1>
                <p>Tap on items to help your child communicate their needs and feelings.</p>
                <div class="communication-board">
                    <div class="board-grid" id="communication-grid">
                        <!-- Items will be added dynamically -->
                    </div>
                </div>
            </section>

            <!-- Updated learning modules section with new game cards -->
            <section id="learning-section" class="section-content" style="display: none;">
                <h1>Learning Modules</h1>
                <p>Interactive activities to help your child learn and develop.</p>
                <div class="modules-grid">
                    <div class="module-card">
                        <div class="module-image-container">
                            <img src="image2.jpg" alt="Alphabet" class="module-image">
                        </div>
                        <div class="module-details">
                            <h3 class="module-title">Alphabet Learning</h3>
                            <p class="module-description">Interactive ABCs with visual aids</p>
                            <div class="module-actions">
                                <button class="btn btn-primary btn-sm" onclick="startModule('alphabet')">Start</button>
                            </div>
                        </div>
                    </div>
                    <div class="module-card">
                        <div class="module-image-container">
                            <img src="image3.jpg" alt="Numbers" class="module-image">
                        </div>
                        <div class="module-details">
                            <h3 class="module-title">Number Recognition</h3>
                            <p class="module-description">Counting and number games</p>
                            <div class="module-actions">
                                <button class="btn btn-primary btn-sm" onclick="startModule('numbers')">Start</button>
                            </div>
                        </div>
                    </div>
                    <div class="module-card">
                        <div class="module-image-container">
                            <img src="image4.jpg" alt="Colors" class="module-image">
                        </div>
                        <div class="module-details">
                            <h3 class="module-title">Color Matching</h3>
                            <p class="module-description">Learn colors with fun activities</p>
                            <div class="module-actions">
                                <button class="btn btn-primary btn-sm" onclick="startModule('colors')">Start</button>
                            </div>
                        </div>
                    </div>
                    <div class="module-card">
                        <div class="module-image-container">
                            <img src="image5.jpg" alt="Shapes" class="module-image">
                        </div>
                        <div class="module-details">
                            <h3 class="module-title">Shape Recognition</h3>
                            <p class="module-description">Identify and match shapes</p>
                            <div class="module-actions">
                                <button class="btn btn-primary btn-sm" onclick="startModule('shapes')">Start</button>
                            </div>
                        </div>
                    </div>
                    <!-- New Music Making Module Card -->
                    <div class="module-card">
                        <div class="module-image-container">
                            <img src="image6.jpg" alt="Music" class="module-image">
                        </div>
                        <div class="module-details">
                            <h3 class="module-title">Music Making</h3>
                            <p class="module-description">Create music with fun instruments</p>
                            <div class="module-actions">
                                <button class="btn btn-primary btn-sm" onclick="startModule('music')">Start</button>
                            </div>
                        </div>
                    </div>
                    <!-- New Sing-Along Rhythms Module Card -->
                    <div class="module-card">
                        <div class="module-image-container">
                            <img src="images7.jpg" alt="Rhythm" class="module-image">
                        </div>
                        <div class="module-details">
                            <h3 class="module-title">Sing-Along Rhythms</h3>
                            <p class="module-description">Follow and repeat musical rhythms</p>
                            <div class="module-actions">
                                <button class="btn btn-primary btn-sm" onclick="startModule('rhythm')">Start</button>
                            </div>
                        </div>
                    </div>
                    <!-- New Storybook Reading Module Card -->
                    <div class="module-card">
                        <div class="module-image-container">
                            <img src="images7.jpg" alt="Storybook" class="module-image">
                        </div>
                        <div class="module-details">
                            <h3 class="module-title">Storybook Reading</h3>
                            <p class="module-description">Listen to engaging stories</p>
                            <div class="module-actions">
                                <button class="btn btn-primary btn-sm" onclick="startModule('storybook')">Start</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Existing alphabet module remains unchanged -->
            <section id="alphabet-module" class="section-content" style="display: none;">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">Alphabet Learning</h2>
                        <div class="game-score">Letter <span id="current-letter-index">1</span> of <span id="total-letters">26</span></div>
                    </div>
                    <div class="game-content">
                        <div class="alphabet-card">
                            <div class="alphabet-letter" id="current-letter">A</div>
                            <img class="alphabet-image" id="letter-image" src="https://cdn.pixabay.com/photo/2016/01/05/13/58/apple-1122537_640.jpg" alt="Apple">
                            <div class="alphabet-word" id="letter-word">Apple</div>
                        </div>
                        <div class="alphabet-nav">
                            <button class="btn btn-outline" id="prev-letter" onclick="prevLetter()">
                                <i class="fas fa-arrow-left"></i> Previous
                            </button>
                            <button class="btn btn-primary" onclick="speakCurrentLetter()">
                                <i class="fas fa-volume-up"></i> Speak
                            </button>
                            <button class="btn btn-outline" id="next-letter" onclick="nextLetter()">
                                Next <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Existing numbers module remains unchanged -->
            <section id="numbers-module" class="section-content" style="display: none;">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">Number Recognition</h2>
                        <div class="game-score">Score: <span id="numbers-score">0</span></div>
                    </div>
                    <div class="game-content">
                        <div class="game-question" id="numbers-question">Find the number 5</div>
                        <div class="game-feedback" id="numbers-feedback"></div>
                        <div class="game-options" id="numbers-options">
                            <!-- Options will be added dynamically -->
                        </div>
                        <div class="game-progress">
                            <div class="game-progress-fill" id="numbers-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Existing colors module remains unchanged -->
            <section id="colors-module" class="section-content" style="display: none;">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">Color Matching Game</h2>
                        <div class="game-score">Matches: <span id="colors-score">0</span>/6</div>
                    </div>
                    <div class="game-content">
                        <div class="game-question">Match the colors with their names</div>
                        <div class="game-feedback" id="colors-feedback"></div>
                        <div class="color-matching-game" id="colors-game">
                            <!-- Color cards will be added dynamically -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Existing shapes module remains unchanged -->
            <section id="shapes-module" class="section-content" style="display: none;">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">Shape Recognition</h2>
                        <div class="game-score">Score: <span id="shapes-score">0</span></div>
                    </div>
                    <div class="game-content">
                        <div class="game-question" id="shapes-question">Find the circle</div>
                        <div class="game-feedback" id="shapes-feedback"></div>
                        <div class="game-options" id="shapes-options">
                            <!-- Options will be added dynamically -->
                        </div>
                        <div class="game-progress">
                            <div class="game-progress-fill" id="shapes-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- New Music Making Module -->
            <section id="music-module" class="section-content" style="display: none;">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">Music Making</h2>
                        <div class="game-score">Notes Played: <span id="music-score">0</span></div>
                    </div>
                    <div class="game-content">
                        <div class="game-question">Tap the instruments to create music!</div>
                        <div class="instrument-grid" id="instrument-grid">
                            <!-- Instruments will be added dynamically -->
                        </div>
                        <div class="game-nav">
                            <button class="btn btn-primary" onclick="playMelody()">
                                <i class="fas fa-play"></i> Play Melody
                            </button>
                            <button class="btn btn-outline" onclick="resetMelody()">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- New Sing-Along Rhythms Module -->
            <section id="rhythm-module" class="section-content" style="display: none;">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">Sing-Along Rhythms</h2>
                        <div class="game-score">Score: <span id="rhythm-score">0</span></div>
                    </div>
                    <div class="game-content">
                        <div class="game-question" id="rhythm-question">Listen and repeat the rhythm!</div>
                        <div class="game-feedback" id="rhythm-feedback"></div>
                        <div class="rhythm-sequence" id="rhythm-sequence">
                            <!-- Rhythm beats will be added dynamically -->
                        </div>
                        <div class="game-nav">
                            <button class="btn btn-primary" onclick="playRhythm()">
                                <i class="fas fa-play"></i> Play Rhythm
                            </button>
                            <button class="btn btn-outline" onclick="resetRhythm()">
                                <i class="fas fa-redo"></i> New Rhythm
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- New Storybook Reading Module -->
            <section id="storybook-module" class="section-content" style="display: none;">
                <div class="game-container">
                    <div class="game-header">
                        <h2 class="game-title">Storybook Reading</h2>
                        <div class="game-score">Page <span id="current-page">1</span> of <span id="total-pages">3</span></div>
                    </div>
                    <div class="game-content">
                        <div class="storybook-container">
                            <div class="storybook-page" id="storybook-page">
                                <!-- Story content will be added dynamically -->
                            </div>
                            <div class="storybook-nav">
                                <button class="btn btn-outline" id="prev-page" onclick="prevPage()">
                                    <i class="fas fa-arrow-left"></i> Previous
                                </button>
                                <button class="btn btn-primary" onclick="readPage()">
                                    <i class="fas fa-volume-up"></i> Read
                                </button>
                                <button class="btn btn-outline" id="next-page" onclick="nextPage()">
                                    Next <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Existing progress and settings sections remain unchanged -->
            <section id="progress-section" class="section-content" style="display: none;">
                <h1>Progress Tracking</h1>
                <p>Track your child's learning and communication progress.</p>
                <div class="progress-container">
                    <h3>Overall Progress</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="overall-progress" style="width: 65%"></div>
                    </div>
                    <div class="progress-items">
                        <div class="progress-item completed">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h4>Alphabet Recognition</h4>
                                <p>Completed 15/26 letters</p>
                            </div>
                        </div>
                        <div class="progress-item in-progress">
                            <i class="fas fa-spinner"></i>
                            <div>
                                <h4>Number Counting</h4>
                                <p>Can count to 10</p>
                            </div>
                        </div>
                        <div class="progress-item in-progress">
                            <i class="fas fa-spinner"></i>
                            <div>
                                <h4>Basic Needs Communication</h4>
                                <p>Uses 8/12 basic needs icons</p>
                            </div>
                        </div>
                        <div class="progress-item">
                            <i class="fas fa-circle"></i>
                            <div>
                                <h4>Color Identification</h4>
                                <p>Not started yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="settings-section" class="section-content" style="display: none;">
                <h1>Settings</h1>
                <p>Customize the app to suit your child's needs.</p>
                <div class="settings-options">
                    <div class="setting-card">
                        <h3>Child Profile</h3>
                        <p>Update your child's information and preferences</p>
                        <button class="btn btn-outline">Edit Profile</button>
                    </div>
                    <div class="setting-card">
                        <h3>Accessibility</h3>
                        <p>Adjust text size, colors, and interaction settings</p>
                        <button class="btn btn-outline">Accessibility Settings</button>
                    </div>
                    <div class="setting-card">
                        <h3>Appearance</h3>
                        <p>Change theme and visual style</p>
                        <button class="btn btn-outline" id="toggle-theme">Toggle Dark Mode</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Existing speech output and theme toggle remain unchanged -->
    <div class="speech-output" id="speech-output"></div>
    <button class="theme-toggle" id="theme-toggle">
        <i class="fas fa-moon"></i>
    </button>

    <!-- Existing footer remains unchanged -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Silent Learners</h3>
                    <p>Empowering non-verbal children through interactive learning and communication tools.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showSection('dashboard')">Home</a></li>
                        <li><a href="#" onclick="showSection('communication')">Communication Board</a></li>
                        <li><a href="#" onclick="showSection('learning')">Learning Modules</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Resources</h3>
                    <ul class="footer-links">
                        <li><a href="#">Parent Guides</a></li>
                        <li><a href="#">Therapist Resources</a></li>
                        <li><a href="#">Research</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact</h3>
                    <ul class="footer-links">
                        <li><a href="mailto:support@silentlearners.com">support@esther'ssilentlearnershub.com</a></li>
                        <li><a href="#">Help Center</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2025 Esther's Silent Learners' Hub. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Updated JavaScript with new game logic -->
    <script>
        // Existing data arrays remain unchanged
        const communicationItems = [
            { id: 1, text: "Hungry", icon: "fa-utensils", sound: "hungry" },
            { id: 2, text: "Thirsty", icon: "fa-glass-water", sound: "thirsty" },
            { id: 3, text: "Bathroom", icon: "fa-toilet", sound: "bathroom" },
            { id: 4, text: "Happy", icon: "fa-smile", sound: "happy" },
            { id: 5, text: "Sad", icon: "fa-sad-tear", sound: "sad" },
            { id: 6, text: "Tired", icon: "fa-bed", sound: "tired" },
            { id: 7, text: "Play", icon: "fa-gamepad", sound: "play" },
            { id: 8, text: "Stop", icon: "fa-hand-paper", sound: "stop" },
            { id: 9, text: "Help", icon: "fa-hands-helping", sound: "help" },
            { id: 10, text: "Yes", icon: "fa-thumbs-up", sound: "yes" },
            { id: 11, text: "No", icon: "fa-thumbs-down", sound: "no" },
            { id: 12, text: "More", icon: "fa-plus-circle", sound: "more" }
        ];

        const alphabetData = [
            { letter: "A", word: "Apple", image: "https://cdn.pixabay.com/photo/2016/01/05/13/58/apple-1122537_640.jpg" },
            { letter: "B", word: "Ball", image: "https://cdn.pixabay.com/photo/2013/07/13/11/34/football-157930_640.png" },
            { letter: "C", word: "Cat", image: "https://cdn.pixabay.com/photo/2017/02/20/18/03/cat-2083492_640.jpg" },
            { letter: "D", word: "Dog", image: "https://cdn.pixabay.com/photo/2016/12/13/05/15/puppy-1903313_640.jpg" },
            { letter: "E", word: "Elephant", image: "https://cdn.pixabay.com/photo/2011/11/29/07/04/elephant-10884_640.jpg" },
            { letter: "F", word: "Fish", image: "https://cdn.pixabay.com/photo/2016/12/31/21/22/discus-fish-1943755_640.jpg" },
            { letter: "G", word: "Giraffe", image: "https://cdn.pixabay.com/photo/2017/04/11/21/34/giraffe-2222908_640.jpg" },
            { letter: "H", word: "House", image: "https://cdn.pixabay.com/photo/2016/06/24/10/47/house-1477041_640.jpg" },
            { letter: "I", word: "Ice Cream", image: "https://cdn.pixabay.com/photo/2018/06/02/11/45/ice-cream-3448613_640.jpg" },
            { letter: "J", word: "Juice", image: "https://cdn.pixabay.com/photo/2017/01/20/14/59/orange-1995044_640.jpg" },
            { letter: "K", word: "Kite", image: "https://cdn.pixabay.com/photo/2013/07/12/18/57/kite-153746_640.png" },
            { letter: "L", word: "Lion", image: "https://cdn.pixabay.com/photo/2017/10/25/16/54/african-lion-2888519_640.jpg" },
            { letter: "M", word: "Monkey", image: "https://cdn.pixabay.com/photo/2017/09/23/16/33/pixel-heart-2779422_640.png" },
            { letter: "N", word: "Nest", image: "https://cdn.pixabay.com/photo/2017/06/09/16/22/bird-2387634_640.jpg" },
            { letter: "O", word: "Orange", image: "https://cdn.pixabay.com/photo/2017/01/20/15/06/oranges-1995056_640.jpg" },
            { letter: "P", word: "Pizza", image: "https://cdn.pixabay.com/photo/2017/12/09/08/18/pizza-3007395_640.jpg" },
            { letter: "Q", word: "Queen", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/queen-156822_640.png" },
            { letter: "R", word: "Rainbow", image: "https://cdn.pixabay.com/photo/2017/11/04/08/14/rainbow-2917933_640.jpg" },
            { letter: "S", word: "Sun", image: "https://cdn.pixabay.com/photo/2016/11/29/08/41/apple-1868496_640.jpg" },
            { letter: "T", word: "Tree", image: "https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885_640.jpg" },
            { letter: "U", word: "Umbrella", image: "https://cdn.pixabay.com/photo/2017/01/31/23/42/umbrella-2028068_640.png" },
            { letter: "V", word: "Violin", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/violin-156634_640.png" },
            { letter: "W", word: "Watermelon", image: "https://cdn.pixabay.com/photo/2016/02/23/17/42/watermelon-1218689_640.jpg" },
            { letter: "X", word: "Xylophone", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/xylophone-156635_640.png" },
            { letter: "Y", word: "Yacht", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/yacht-156636_640.png" },
            { letter: "Z", word: "Zebra", image: "https://cdn.pixabay.com/photo/2017/01/10/03/06/zebra-1967238_640.jpg" }
        ];

        const numbersData = [
            { number: 1, image: "https://cdn.pixabay.com/photo/2013/07/13/10/51/one-157642_640.png" },
            { number: 2, image: "https://cdn.pixabay.com/photo/2013/07/13/10/51/two-157643_640.png" },
            { number: 3, image: "https://cdn.pixabay.com/photo/2013/07/13/10/51/three-157644_640.png" },
            { number: 4, image: "https://cdn.pixabay.com/photo/2013/07/13/10/51/four-157645_640.png" },
            { number: 5, image: "https://cdn.pixabay.com/photo/2013/07/13/10/51/five-157646_640.png" },
            { number: 6, image: "https://cdn.pixabay.com/photo/2013/07/13/10/51/six-157647_640.png" },
            { number: 7, image: "https://cdn.pixabay.com/photo/2013/07/13/10/51/seven-157648_640.png" },
            { number: 8, image: "https://cdn.pixabay.com/photo/2013/07/13/10/51/eight-157649_640.png" },
            { number: 9, image: "https://cdn.pixabay.com/photo/2013/07/13/10/51/nine-157650_640.png" },
            { number: 10, image: "https://cdn.pixabay.com/photo/2013/07/13/10/51/ten-157651_640.png" }
        ];

        const colorsData = [
            { name: "Red", color: "#ff0000", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/apple-156704_640.png" },
            { name: "Blue", color: "#0000ff", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/blue-156604_640.png" },
            { name: "Green", color: "#00ff00", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/leaf-156595_640.png" },
            { name: "Yellow", color: "#ffff00", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/banana-156594_640.png" },
            { name: "Orange", color: "#ffa500", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/orange-156593_640.png" },
            { name: "Purple", color: "#800080", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/grapes-156592_640.png" }
        ];

        const shapesData = [
            { name: "Circle", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/circle-156591_640.png" },
            { name: "Square", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/square-156590_640.png" },
            { name: "Triangle", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/triangle-156589_640.png" },
            { name: "Rectangle", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/rectangle-156588_640.png" },
            { name: "Star", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/star-156587_640.png" },
            { name: "Heart", image: "https://cdn.pixabay.com/photo/2013/07/13/10/07/heart-156586_640.png" }
        ];

        // New data for music, rhythm, and storybook modules
        const instrumentsData = [
            { name: "Drum", icon: "fa-drum", sound: "https://freesound.org/data/previews/171/171104_2434968-lq.mp3" },
            { name: "Piano", icon: "fa-piano", sound: "https://freesound.org/data/previews/548/548343_4332276-lq.mp3" },
            { name: "Xylophone", icon: "fa-xylophone", sound: "https://freesound.org/data/previews/339/339559_5121236-lq.mp3" },
            { name: "Guitar", icon: "fa-guitar", sound: "https://freesound.org/data/previews/373/373371_2287616-lq.mp3" }
        ];

        const rhythmData = [
            { sequence: [1, 0, 1, 0], name: "Simple Beat" },
            { sequence: [1, 1, 0, 1], name: "Quick Beat" },
            { sequence: [0, 1, 0, 1], name: "Slow Beat" },
            { sequence: [1, 0, 0, 1], name: "Sparse Beat" }
        ];

        const storybookData = [
            {
                page: 1,
                text: "Once upon a time, there was a little bunny named Benny who lived in a cozy burrow.",
                image: "https://cdn.pixabay.com/photo/2018/07/05/14/00/rabbit-3519043_640.jpg"
            },
            {
                page: 2,
                text: "Benny loved to hop through the forest, meeting new friends like Squirrel and Owl.",
                image: "https://cdn.pixabay.com/photo/2018/03/01/14/57/forest-3191031_640.jpg"
            },
            {
                page: 3,
                text: "Every night, Benny snuggled in his burrow, dreaming of new adventures.",
                image: "https://cdn.pixabay.com/photo/2017/04/06/15/35/bunny-2208182_640.jpg"
            }
        ];

        // Existing game state variables
        let currentLetterIndex = 0;
        let numbersGameState = {
            score: 0,
            currentQuestion: null,
            questionsAnswered: 0,
            totalQuestions: 5
        };
        let colorsGameState = {
            score: 0,
            firstSelection: null,
            matchedPairs: 0,
            totalPairs: colorsData.length
        };
        let shapesGameState = {
            score: 0,
            currentQuestion: null,
            questionsAnswered: 0,
            totalQuestions: 5
        };

        // New game state variables
        let musicGameState = {
            score: 0,
            melody: []
        };
        let rhythmGameState = {
            score: 0,
            currentRhythm: null,
            userSequence: [],
            currentIndex: 0
        };
        let storybookState = {
            currentPage: 0
        };

        // Existing DOM elements
        const communicationGrid = document.getElementById('communication-grid');
        const speechOutput = document.getElementById('speech-output');
        const themeToggle = document.getElementById('theme-toggle');
        const navLinks = document.querySelectorAll('.nav-link');
        const sectionContents = document.querySelectorAll('.section-content');

        // Initialize the app
        function initApp() {
            renderCommunicationBoard();
            setupNavigation();
            setupThemeToggle();
            checkSavedTheme();
            initNumberGame();
            initColorsGame();
            initShapesGame();
            initMusicGame();
            initRhythmGame();
            initStorybook();
        }

        // Existing renderCommunicationBoard function remains unchanged
        function renderCommunicationBoard() {
            communicationGrid.innerHTML = '';
            communicationItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'board-item';
                itemElement.innerHTML = `
                    <i class="fas ${item.icon}"></i>
                    <span class="board-item-text">${item.text}</span>
                `;
                itemElement.addEventListener('click', () => {
                    speakItem(item.text);
                });
                communicationGrid.appendChild(itemElement);
            });
        }

        // Existing speakItem function remains unchanged
        function speakItem(text) {
            speechOutput.textContent = text;
            speechOutput.classList.add('show');
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
            setTimeout(() => {
                speechOutput.classList.remove('show');
            }, 3000);
        }

        // Updated startModule function to handle new modules
        function startModule(moduleId) {
            sectionContents.forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById(`${moduleId}-module`).style.display = 'block';
            navLinks.forEach(link => link.classList.remove('active'));
            document.querySelector(`.nav-link[data-section="learning"]`).classList.add('active');
            
            if (moduleId === 'alphabet') {
                currentLetterIndex = 0;
                updateAlphabetDisplay();
            } else if (moduleId === 'music') {
                initMusicGame();
            } else if (moduleId === 'rhythm') {
                initRhythmGame();
            } else if (moduleId === 'storybook') {
                initStorybook();
            }
            
            window.scrollTo(0, 0);
        }

        // Existing alphabet functions remain unchanged
        function updateAlphabetDisplay() {
            const currentLetter = alphabetData[currentLetterIndex];
            document.getElementById('current-letter').textContent = currentLetter.letter;
            document.getElementById('letter-image').src = currentLetter.image;
            document.getElementById('letter-word').textContent = currentLetter.word;
            document.getElementById('current-letter-index').textContent = currentLetterIndex + 1;
            document.getElementById('total-letters').textContent = alphabetData.length;
            document.getElementById('prev-letter').disabled = currentLetterIndex === 0;
            document.getElementById('next-letter').disabled = currentLetterIndex === alphabetData.length - 1;
        }

        function prevLetter() {
            if (currentLetterIndex > 0) {
                currentLetterIndex--;
                updateAlphabetDisplay();
            }
        }

        function nextLetter() {
            if (currentLetterIndex < alphabetData.length - 1) {
                currentLetterIndex++;
                updateAlphabetDisplay();
            }
        }

        function speakCurrentLetter() {
            const currentLetter = alphabetData[currentLetterIndex];
            speakItem(`${currentLetter.letter} is for ${currentLetter.word}`);
        }

        // Existing number game functions remain unchanged
        function initNumberGame() {
            numbersGameState.score = 0;
            numbersGameState.questionsAnswered = 0;
            document.getElementById('numbers-score').textContent = numbersGameState.score;
            document.getElementById('numbers-progress').style.width = '0%';
            generateNumberQuestion();
        }

        function generateNumberQuestion() {
            const targetNumber = numbersData[Math.floor(Math.random() * numbersData.length)];
            numbersGameState.currentQuestion = targetNumber;
            const options = [targetNumber];
            while (options.length < 4) {
                const randomNumber = numbersData[Math.floor(Math.random() * numbersData.length)];
                if (!options.some(opt => opt.number === randomNumber.number)) {
                    options.push(randomNumber);
                }
            }
            options.sort(() => Math.random() - 0.5);
            document.getElementById('numbers-question').textContent = `Find the number ${targetNumber.number}`;
            document.getElementById('numbers-feedback').textContent = '';
            document.getElementById('numbers-feedback').className = 'game-feedback';
            const optionsContainer = document.getElementById('numbers-options');
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'game-option';
                optionElement.innerHTML = `
                    <img src="${option.image}" alt="Number ${option.number}">
                `;
                optionElement.addEventListener('click', () => {
                    checkNumberAnswer(option.number === targetNumber.number, option.number);
                });
                optionsContainer.appendChild(optionElement);
            });
        }

        function checkNumberAnswer(isCorrect, selectedNumber) {
            const feedbackElement = document.getElementById('numbers-feedback');
            const options = document.querySelectorAll('#numbers-options .game-option');
            if (isCorrect) {
                feedbackElement.textContent = `Correct! ${selectedNumber} is the right answer.`;
                feedbackElement.className = 'game-feedback correct';
                numbersGameState.score += 10;
                document.getElementById('numbers-score').textContent = numbersGameState.score;
                options.forEach(option => {
                    const img = option.querySelector('img');
                    if (img.alt.includes(numbersGameState.currentQuestion.number)) {
                        option.classList.add('correct');
                    }
                });
            } else {
                feedbackElement.textContent = `Try again! That was number ${selectedNumber}.`;
                feedbackElement.className = 'game-feedback incorrect';
                options.forEach(option => {
                    const img = option.querySelector('img');
                    if (img.alt.includes(numbersGameState.currentQuestion.number)) {
                        option.classList.add('correct');
                    } else if (img.alt.includes(selectedNumber)) {
                        option.classList.add('incorrect');
                    }
                });
            }
            numbersGameState.questionsAnswered++;
            const progressPercent = (numbersGameState.questionsAnswered / numbersGameState.totalQuestions) * 100;
            document.getElementById('numbers-progress').style.width = `${progressPercent}%`;
            if (numbersGameState.questionsAnswered < numbersGameState.totalQuestions) {
                setTimeout(generateNumberQuestion, 1500);
            } else {
                setTimeout(() => {
                    alert(`Game over! Your score: ${numbersGameState.score}`);
                    initNumberGame();
                }, 1500);
            }
        }

        // Existing color game functions remain unchanged
        function initColorsGame() {
            colorsGameState.score = 0;
            colorsGameState.firstSelection = null;
            colorsGameState.matchedPairs = 0;
            document.getElementById('colors-score').textContent = `${colorsGameState.matchedPairs}/${colorsGameState.totalPairs}`;
            generateColorsGame();
        }

        function generateColorsGame() {
            const gameContainer = document.getElementById('colors-game');
            gameContainer.innerHTML = '';
            const colorCards = [];
            colorsData.forEach(color => {
                colorCards.push({
                    type: 'color',
                    color: color.color,
                    name: color.name,
                    matched: false
                });
                colorCards.push({
                    type: 'name',
                    color: color.color,
                    name: color.name,
                    matched: false
                });
            });
            colorCards.sort(() => Math.random() - 0.5);
            colorCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'color-card';
                cardElement.dataset.index = index;
                if (card.type === 'color') {
                    cardElement.style.backgroundColor = card.color;
                } else {
                    cardElement.style.backgroundColor = '#ffffff';
                    const nameElement = document.createElement('div');
                    nameElement.className = 'color-name';
                    nameElement.textContent = card.name;
                    nameElement.style.color = card.color;
                    cardElement.appendChild(nameElement);
                }
                cardElement.addEventListener('click', () => selectColorCard(cardElement, index));
                gameContainer.appendChild(cardElement);
            });
        }

        function selectColorCard(cardElement, index) {
            if (cardElement.classList.contains('matched') || cardElement.classList.contains('selected')) {
                return;
            }
            if (colorsGameState.firstSelection === null) {
                colorsGameState.firstSelection = index;
                cardElement.classList.add('selected');
                return;
            }
            const firstCard = document.querySelector(`.color-card[data-index="${colorsGameState.firstSelection}"]`);
            const secondCard = cardElement;
            if (colorsGameState.firstSelection === index) {
                return;
            }
            secondCard.classList.add('selected');
            const firstCardColor = firstCard.style.backgroundColor || firstCard.querySelector('.color-name')?.style.color;
            const secondCardColor = secondCard.style.backgroundColor || secondCard.querySelector('.color-name')?.style.color;
            if (firstCardColor === secondCardColor) {
                firstCard.classList.add('matched');
                secondCard.classList.add('matched');
                firstCard.classList.remove('selected');
                secondCard.classList.remove('selected');
                colorsGameState.matchedPairs++;
                document.getElementById('colors-score').textContent = `${colorsGameState.matchedPairs}/${colorsGameState.totalPairs}`;
                document.getElementById('colors-feedback').textContent = "Great job! You found a match!";
                document.getElementById('colors-feedback').className = 'game-feedback correct';
                if (colorsGameState.matchedPairs === colorsGameState.totalPairs) {
                    setTimeout(() => {
                        alert("Congratulations! You matched all the colors!");
                        initColorsGame();
                    }, 1000);
                }
            } else {
                document.getElementById('colors-feedback').textContent = "Try again!";
                document.getElementById('colors-feedback').className = 'game-feedback incorrect';
                setTimeout(() => {
                    firstCard.classList.remove('selected');
                    secondCard.classList.remove('selected');
                }, 1000);
            }
            colorsGameState.firstSelection = null;
        }

        // Existing shape game functions remain unchanged
        function initShapesGame() {
            shapesGameState.score = 0;
            shapesGameState.questionsAnswered = 0;
            document.getElementById('shapes-score').textContent = shapesGameState.score;
            document.getElementById('shapes-progress').style.width = '0%';
            generateShapeQuestion();
        }

        function generateShapeQuestion() {
            const targetShape = shapesData[Math.floor(Math.random() * shapesData.length)];
            shapesGameState.currentQuestion = targetShape;
            const options = [targetShape];
            while (options.length < 4) {
                const randomShape = shapesData[Math.floor(Math.random() * shapesData.length)];
                if (!options.some(opt => opt.name === randomShape.name)) {
                    options.push(randomShape);
                }
            }
            options.sort(() => Math.random() - 0.5);
            document.getElementById('shapes-question').textContent = `Find the ${targetShape.name}`;
            document.getElementById('shapes-feedback').textContent = '';
            document.getElementById('shapes-feedback').className = 'game-feedback';
            const optionsContainer = document.getElementById('shapes-options');
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'game-option';
                optionElement.innerHTML = `
                    <img src="${option.image}" alt="${option.name}">
                `;
                optionElement.addEventListener('click', () => {
                    checkShapeAnswer(option.name === targetShape.name, option.name);
                });
                optionsContainer.appendChild(optionElement);
            });
        }

        function checkShapeAnswer(isCorrect, selectedShape) {
            const feedbackElement = document.getElementById('shapes-feedback');
            const options = document.querySelectorAll('#shapes-options .game-option');
            if (isCorrect) {
                feedbackElement.textContent = `Correct! That's a ${selectedShape}.`;
                feedbackElement.className = 'game-feedback correct';
                shapesGameState.score += 10;
                document.getElementById('shapes-score').textContent = shapesGameState.score;
                options.forEach(option => {
                    const img = option.querySelector('img');
                    if (img.alt === shapesGameState.currentQuestion.name) {
                        option.classList.add('correct');
                    }
                });
            } else {
                feedbackElement.textContent = `Try again! That was a ${selectedShape}.`;
                feedbackElement.className = 'game-feedback incorrect';
                options.forEach(option => {
                    const img = option.querySelector('img');
                    if (img.alt === shapesGameState.currentQuestion.name) {
                        option.classList.add('correct');
                    } else if (img.alt === selectedShape) {
                        option.classList.add('incorrect');
                    }
                });
            }
            shapesGameState.questionsAnswered++;
            const progressPercent = (shapesGameState.questionsAnswered / shapesGameState.totalQuestions) * 100;
            document.getElementById('shapes-progress').style.width = `${progressPercent}%`;
            if (shapesGameState.questionsAnswered < shapesGameState.totalQuestions) {
                setTimeout(generateShapeQuestion, 1500);
            } else {
                setTimeout(() => {
                    alert(`Game over! Your score: ${shapesGameState.score}`);
                    initShapesGame();
                }, 1500);
            }
        }

        // New Music Making Game Functions
        function initMusicGame() {
            musicGameState.score = 0;
            musicGameState.melody = [];
            document.getElementById('music-score').textContent = musicGameState.score;
            renderInstruments();
        }

         
                                // New Music Making Game Functions (continued)
        function renderInstruments() {
            const instrumentGrid = document.getElementById('instrument-grid');
            instrumentGrid.innerHTML = '';
            instrumentsData.forEach(instrument => {
                const itemElement = document.createElement('div');
                itemElement.className = 'instrument-item';
                itemElement.innerHTML = `
                    <i class="fas ${instrument.icon}"></i>
                    <span class="board-item-text">${instrument.name}</span>
                `;
                itemElement.addEventListener('click', () => {
                    playInstrument(instrument);
                });
                instrumentGrid.appendChild(itemElement);
            });
        }

        function playInstrument(instrument) {
            const audio = new Audio(instrument.sound);
            audio.play();
            musicGameState.score++;
            musicGameState.melody.push(instrument);
            document.getElementById('music-score').textContent = musicGameState.score;
            speakItem(`Playing ${instrument.name}`);
        }

        function playMelody() {
            if (musicGameState.melody.length === 0) {
                speakItem("No melody to play");
                return;
            }
            let index = 0;
            function playNext() {
                if (index >= musicGameState.melody.length) return;
                const instrument = musicGameState.melody[index];
                const audio = new Audio(instrument.sound);
                audio.play();
                index++;
                setTimeout(playNext, 1000); // 1-second delay between notes
            }
            playNext();
        }

        function resetMelody() {
            musicGameState.melody = [];
            musicGameState.score = 0;
            document.getElementById('music-score').textContent = musicGameState.score;
            speakItem("Melody reset");
        }

        // New Sing-Along Rhythms Game Functions
        function initRhythmGame() {
            rhythmGameState.score = 0;
            rhythmGameState.userSequence = [];
            rhythmGameState.currentIndex = 0;
            document.getElementById('rhythm-score').textContent = rhythmGameState.score;
            generateRhythm();
        }

        function generateRhythm() {
            rhythmGameState.currentRhythm = rhythmData[Math.floor(Math.random() * rhythmData.length)];
            rhythmGameState.userSequence = [];
            rhythmGameState.currentIndex = 0;
            document.getElementById('rhythm-feedback').textContent = '';
            document.getElementById('rhythm-feedback').className = 'game-feedback';
            document.getElementById('rhythm-question').textContent = `Listen and repeat the rhythm: ${rhythmGameState.currentRhythm.name}`;
            renderRhythmSequence();
        }

        function renderRhythmSequence() {
            const sequenceContainer = document.getElementById('rhythm-sequence');
            sequenceContainer.innerHTML = '';
            rhythmGameState.currentRhythm.sequence.forEach((beat, index) => {
                const beatElement = document.createElement('div');
                beatElement.className = 'rhythm-beat';
                beatElement.textContent = beat ? '•' : '○';
                beatElement.addEventListener('click', () => {
                    checkRhythmBeat(index, beatElement);
                });
                sequenceContainer.appendChild(beatElement);
            });
        }

        function checkRhythmBeat(index, beatElement) {
            if (index !== rhythmGameState.currentIndex) return;
            const expectedBeat = rhythmGameState.currentRhythm.sequence[index];
            const userBeat = 1; // Clicking always counts as a beat
            rhythmGameState.userSequence.push(userBeat);
            beatElement.classList.add('active');

            if (userBeat === expectedBeat) {
                beatElement.classList.add('correct');
                rhythmGameState.currentIndex++;
                if (rhythmGameState.currentIndex === rhythmGameState.currentRhythm.sequence.length) {
                    rhythmGameState.score += 10;
                    document.getElementById('rhythm-score').textContent = rhythmGameState.score;
                    document.getElementById('rhythm-feedback').textContent = 'Great job! You got the rhythm!';
                    document.getElementById('rhythm-feedback').className = 'game-feedback correct';
                    setTimeout(generateRhythm, 1500);
                }
            } else {
                beatElement.classList.add('incorrect');
                document.getElementById('rhythm-feedback').textContent = 'Try again!';
                document.getElementById('rhythm-feedback').className = 'game-feedback incorrect';
                setTimeout(() => {
                    rhythmGameState.currentIndex = 0;
                    rhythmGameState.userSequence = [];
                    renderRhythmSequence();
                }, 1000);
            }
        }

        function playRhythm() {
            let index = 0;
            function playNext() {
                if (index >= rhythmGameState.currentRhythm.sequence.length) return;
                const beat = rhythmGameState.currentRhythm.sequence[index];
                if (beat) {
                    const audio = new Audio(instrumentsData[0].sound); // Use drum sound
                    audio.play();
                }
                index++;
                setTimeout(playNext, 500); // 0.5-second delay between beats
            }
            playNext();
        }

        function resetRhythm() {
            generateRhythm();
            speakItem("New rhythm");
        }

        // New Storybook Reading Functions
        function initStorybook() {
            storybookState.currentPage = 0;
            updateStorybookDisplay();
        }

        function updateStorybookDisplay() {
            const currentPage = storybookData[storybookState.currentPage];
            const pageContainer = document.getElementById('storybook-page');
            pageContainer.innerHTML = `
                <img src="${currentPage.image}" alt="Story page ${currentPage.page}" class="storybook-image">
                <p class="storybook-text">${currentPage.text}</p>
            `;
            document.getElementById('current-page').textContent = currentPage.page;
            document.getElementById('total-pages').textContent = storybookData.length;
            document.getElementById('prev-page').disabled = storybookState.currentPage === 0;
            document.getElementById('next-page').disabled = storybookState.currentPage === storybookData.length - 1;
        }

        function prevPage() {
            if (storybookState.currentPage > 0) {
                storybookState.currentPage--;
                updateStorybookDisplay();
            }
        }

        function nextPage() {
            if (storybookState.currentPage < storybookData.length - 1) {
                storybookState.currentPage++;
                updateStorybookDisplay();
            }
        }

        function readPage() {
            const currentPage = storybookData[storybookState.currentPage];
            speakItem(currentPage.text);
        }

        // Existing navigation functions remain unchanged
        function setupNavigation() {
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = link.dataset.section;
                    showSection(section);
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                });
            });
        }

        function showSection(sectionId) {
            sectionContents.forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById(`${sectionId}-section`).style.display = 'block';
            window.scrollTo(0, 0);
        }

        // Existing theme toggle functions remain unchanged
        function setupThemeToggle() {
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-theme');
                const isDark = document.body.classList.contains('dark-theme');
                localStorage.setItem('darkTheme', isDark);
                const icon = themeToggle.querySelector('i');
                if (isDark) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                } else {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                }
            });
        }

        function checkSavedTheme() {
            const savedTheme = localStorage.getItem('darkTheme');
            if (savedTheme === 'true') {
                document.body.classList.add('dark-theme');
                const icon = themeToggle.querySelector('i');
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            }
        }

        // Existing service worker registration remains unchanged
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/serviceWorker.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>